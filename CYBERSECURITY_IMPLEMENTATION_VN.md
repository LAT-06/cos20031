Ứng dụng Quản Lý Điểm Archery (Archery Score Recording Web Application) được xây dựng với các biện pháp bảo mật toàn diện phù hợp với yêu cầu của chuyên ngành Cybersecurity COS20031. Hệ thống sử dụng JWT (JSON Web Tokens) với thời hạn hết hạn 24 giờ để xác thực người dùng thông qua backend middleware tại /backend/middleware/auth.js. Mỗi yêu cầu API được xác minh thông qua token Bearer trong header Authorization, ngăn chặn truy cập trái phép. Ứng dụng triển khai Kiểm soát Truy cập Dựa trên Vai trò (Role-Based Access Control - RBAC) với ba cấp độ: (1) Admin có quyền truy cập toàn bộ hệ thống, quản lý người dùng, duyệt/từ chối điểm số và xóa bất kỳ bản ghi nào; (2) Recorder có quyền hạn chế được triển khai qua middleware tại /backend/middleware/roleCheck.js - có thể tạo/chỉnh sửa người chơi, vòng thi, cuộc thi nhưng không thể xóa bất kỳ bản ghi nào hoặc gán vai trò admin/recorder; (3) Archer chỉ có thể gửi điểm của riêng mình, xem lịch sử và duyệt các cuộc thi. Middleware kiểm tra vai trò xác định quyền truy cập trước khi xử lý mỗi yêu cầu.

Mật khẩu được mã hóa bằng bcrypt với 10 vòng muối (bcrypt v5.1.1) được triển khai thông qua Sequelize hooks trong /backend/models/Archer.js, đáp ứng tiêu chuẩn công nghiệp. Quá trình bảo mật được thực hiện trước khi tạo hoặc cập nhật bản ghi người dùng. Khi người dùng đăng nhập, hệ thống sử dụng bcrypt.compare() để so sánh mật khẩu nhập vào với hash đã lưu trữ. Phương pháp so sánh này chạy trong thời gian hằng số, ngăn chặn các cuộc tấn công dựa trên thời gian (timing attacks). Tất cả dữ liệu đầu vào được xác thực bằng framework express-validator (v7.0.1) triển khai tại /backend/middleware/validation.js. Email phải tuân theo định dạng hợp lệ và là duy nhất trong hệ thống để ngăn chặn tạo tài khoản trùng lặp. Middleware validation kiểm tra mọi yêu cầu và trả về chi tiết lỗi nếu dữ liệu không hợp lệ, bảo vệ ứng dụng khỏi các cuộc tấn công injection và malformed data.

Ứng dụng sử dụng Sequelize ORM (v6.37.7) với các truy vấn được tham số hóa, hoàn toàn loại bỏ nguy cơ SQL injection. Tất cả truy vấn cơ sở dữ liệu đều sử dụng các phương thức ORM (findOne, findByPk, create, update, etc.) thay vì chuỗi SQL thô, được cấu hình trong /backend/config/database.js với MariaDB dialect. Thông tin đăng nhập cơ sở dữ liệu được quản lý thông qua biến môi trường, không được hardcode trong mã. Library helmet (v7.1.0) được sử dụng trong /backend/server.js để tự động thêm các header bảo mật HTTP: X-Content-Type-Options: nosniff (ngăn chặn MIME sniffing), X-Frame-Options: DENY (ngăn clickjacking), X-XSS-Protection (bảo vệ XSS), Strict-Transport-Security (bắt buộc HTTPS), và Content-Security-Policy (ngăn chặn các cuộc tấn công injection). Những header này được đặt tự động trên mọi phản hồi, giảm đáng kể bề mặt tấn công. CORS middleware (v2.8.5) cho phép ứng dụng frontend giao tiếp an toàn với API, với cấu hình mặc định cho phép yêu cầu từ bất kỳ nguồn gốc nào (phù hợp cho triển khai nội bộ/phát triển).

Mật khẩu không bao giờ được gửi trong các phản hồi API. Mỗi khi trích xuất dữ liệu người dùng tại /backend/controllers/authController.js, PasswordHash được loại trừ một cách tường minh bằng cách sử dụng attributes: { exclude: ["PasswordHash"] }. Thông tin vai trò được kiểm soát chặt chẽ, chỉ được tiết lộ khi cần thiết. Thông tin phân loại và khoá cơ sở dữ liệu được phạm vi hóa thích hợp theo vai trò người dùng. Ứng dụng có global error handler ở /backend/server.js đảm bảo lỗi sản xuất không tiết lộ cấu trúc nội bộ. Stack traces chỉ được bao gồm khi NODE_ENV=development. Thông điệp lỗi xác thực là chung chung ("Invalid email or password") cho cả email không tồn tại và mật khẩu sai, ngăn chặn kỹ thuật liệt kê người dùng (user enumeration attacks). Định dạng phản hồi lỗi nhất quán trên toàn bộ API.

Tất cả bí mật được quản lý thông qua dotenv (v16.3.1) từ file /backend/.env, không được commit vào version control. Các biến quan trọng bao gồm: JWT_SECRET (ký và xác minh JWT), DB_HOST/PORT/NAME/USER/PASSWORD (thông tin đăng nhập cơ sở dữ liệu), JWT_EXPIRE (thời hạn token), và NODE_ENV (chế độ môi trường). File .env.example cung cấp mẫu để hướng dẫn cấu hình, và .env được danh sách trong .gitignore để ngăn chặn tiết lộ bí mật. Ứng dụng sử dụng các phiên bản mới nhất của tất cả thư viện bảo mật: bcrypt 5.1.1, Express 4.18.2, helmet 7.1.0, jsonwebtoken 9.0.2, express-validator 7.0.1, và Sequelize 6.37.7. Sequelize được nâng cấp thủ công từ v1.2.1 (rất cũ) lên v6.37.7 (mới nhất) để khắc phục lỗ hổng. Ba lỗ hổng trung bình vẫn tồn tại trong các gói lồng nhau (nested dependencies) nhưng không được sử dụng thực tế (chỉ xác thực email, không xác thực URL), dẫn đến rủi ro thực tế thấp.

Morgan (v1.10.0) ghi lại tất cả các yêu cầu HTTP được triển khai trong /backend/server.js bằng app.use(morgan("dev")), giúp xác định các hoạt động đáng ngờ và tạo đường mòng kiểm toán. Format ghi nhật ký bao gồm phương thức, URL, mã trạng thái, và thời gian phản hồi, là công cụ có giá trị cho việc debug và phát hiện xâm nhập. Hệ thống tự động gán lớp tuổi dựa trên ngày sinh và giới tính tại /backend/utils/helpers.js thông qua các hàm calculateAge() và determineClass(), bảo vệ quyền riêng tư mà không cần can thiệp thủ công. Bản ghi điểm được liên kết với từng người chơi riêng biệt và yêu cầu quy trình phê duyệt trước khi hoàn tất. Điểm tốt nhất cá nhân được theo dõi riêng tư, trong khi các kỷ lục câu lạc bộ được tổng hợp mà không tiết lộ chi tiết cá nhân.

JWT là chiến lược xác thực không trạng thái (stateless), không yêu cầu lưu trữ phiên trên máy chủ. Điều này cho phép ứng dụng mở rộng trên nhiều máy chủ mà không cần đồng bộ hóa phiên. Token tự động hết hạn sau 24 giờ được cấu hình thông qua JWT_EXPIRE, ngăn chặn lạm dụng long-term. Token được xác minh trên mọi yêu cầu thông qua header Authorization và các token hết hạn bị từ chối tự động bởi middleware auth. Tất cả các phương pháp bảo mật hàng đầu đều được triển khai đầy đủ: Hashing mật khẩu bằng bcrypt 10 vòng được triển khai, JWT token với hết hạn 24 giờ được triển khai, RBAC ba cấp độ được triển khai, Xác thực đầu vào toàn diện được triển khai, Ngăn chặn SQL injection qua ORM được triển khai, Bảo vệ XSS qua Helmet được triển khai, CORS cấu hình được triển khai, Header bảo mật đầy đủ được triển khai, Xử lý lỗi an toàn không tiết lộ thông tin được triển khai, Quản lý bí mật qua dotenv được triển khai, Ghi nhật ký HTTP để kiểm toán được triển khai, Xác thực email duy nhất được triển khai, So sánh mật khẩu thời gian hằng số được triển khai, và Loại trừ PasswordHash khỏi phản hồi được triển khai.

Kiến trúc sử dụng Express.js + Sequelize ORM + MariaDB với các thư viện bảo mật helmet, bcrypt, jsonwebtoken, cors, và express-validator được cấu hình trong package.json. Ứng dụng tuân thủ OWASP Top 10, sử dụng header bảo mật theo tiêu chuẩn công nghiệp, áp dụng các phương pháp tốt nhất về bảo mật mật khẩu, và triển khai RBAC một cách chặt chẽ, đảm bảo hệ thống an toàn và đáng tin cậy cho việc quản lý thông tin người dùng và điểm số archery.
